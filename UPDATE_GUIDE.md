# 错题整理工具 v2.0.0 更新指南

## 🎉 重大更新内容

### 🐛 BUG修复
- **修复图片保存问题**: 解决了图片预处理后无法正确保存的BUG
- **改进错误处理**: 增强了异常处理机制，提供更友好的错误提示

### ✨ 全新功能

#### 1. 图片裁剪功能
- **位置**: 工具菜单 → 图片裁剪 或 右键菜单 → 图片裁剪
- **功能**: 
  - 自定义裁剪区域（拖拽调整）
  - 预设裁剪选项：正方形、顶部区域、中心区域
  - 实时预览裁剪效果
  - 一键应用裁剪
- **使用场景**: 去除图片边缘无用部分，聚焦题目内容

#### 2. 图片旋转功能
- **位置**: 工具菜单 → 图片旋转 或 右键菜单 → 图片旋转
- **功能**:
  - 90°/180°/270°快速旋转
  - 自定义角度旋转（0-360°）
  - 自动扩展画布
- **使用场景**: 纠正倾斜的图片方向

#### 3. 标签管理系统
- **位置**: 编辑菜单 → 添加标签 或 右键菜单 → 添加标签
- **功能**:
  - 为每个文件添加自定义标签
  - 支持多标签（用逗号分隔）
  - 在文件列表中显示标签
  - 标签搜索和筛选
- **使用场景**: 标记重要程度、题型、难度等

#### 4. 批量重命名功能
- **位置**: 文件菜单 → 批量重命名
- **功能**:
  - 设置前缀和后缀
  - 自动编号（可设置起始数字和位数）
  - 实时预览重命名效果
  - 批量应用到多个文件
- **使用场景**: 统一文件命名格式

#### 5. 文件搜索功能
- **位置**: 工具菜单 → 搜索文件 或 Ctrl+F
- **功能**:
  - 实时文件名搜索
  - 搜索结果高亮显示
  - 快速定位文件
- **使用场景**: 快速找到特定文件

#### 6. 统计信息显示
- **位置**: 视图菜单 → 显示统计信息
- **功能**:
  - 总文件数量和大小
  - 按学科分类统计
  - 可视化统计图表
- **使用场景**: 了解错题库的整体情况

### 🎨 界面美化

#### 1. 现代化设计
- **改进的按钮样式**: 更加美观的圆角按钮
- **统一的颜色主题**: 协调的蓝灰色调
- **改进的字体**: 更好的字体层次

#### 2. 增强的工具栏
- **搜索框**: 快速文件搜索
- **工具下拉菜单**: 分类的工具选项
- **状态信息**: 实时显示操作状态

#### 3. 改进的文件列表
- **标签列**: 显示文件标签
- **更好的图标**: 清晰的文件类型标识
- **改进的布局**: 更紧凑的信息展示

### ⚡ 性能优化

#### 1. 快捷键支持
- **Ctrl+I**: 导入错题
- **Ctrl+R**: 刷新列表
- **Ctrl+F**: 搜索文件
- **F2**: 重命名文件
- **Delete**: 删除文件
- **F5**: 刷新列表

#### 2. 自动备份
- **图片处理前自动备份**: 防止意外丢失
- **可配置备份选项**: 在设置中开关
- **备份文件标识**: `.backup`后缀

#### 3. 改进的设置系统
- **主题切换**: 支持多种主题
- **个性化选项**: 备份、统计等设置
- **配置持久化**: 设置自动保存

### 🔧 工具增强

#### 1. 智能右键菜单
- **文件类型识别**: 根据文件类型显示相应操作
- **图片专用操作**: 对图片文件显示裁剪、旋转等选项
- **统一操作入口**: 所有操作都可以通过右键菜单访问

#### 2. 改进的导出功能
- **更多导出选项**: 支持导出选中项
- **改进的PDF格式**: 更好的排版和布局
- **增强的Word导出**: 保持图片和文字质量

## 🚀 升级步骤

### 从v1.0.0升级到v2.0.0

1. **备份数据**（可选）
   ```bash
   # 备份CuoTi目录
   cp -r CuoTi CuoTi_backup_$(date +%Y%m%d)
   ```

2. **替换程序文件**
   - 下载新的 `wrong_question_tool.py`
   - 替换旧版本文件

3. **运行测试**
   ```bash
   python test_v2.py
   ```

4. **启动程序**
   ```bash
   python wrong_question_tool.py
   ```

### 兼容性说明
- ✅ **完全向后兼容**: v1.0.0的所有数据都能正常使用
- ✅ **配置自动迁移**: 旧版本配置会自动适配新版本
- ✅ **文件格式不变**: 所有文件格式保持不变

## 📝 使用建议

### 新功能推荐使用场景

1. **图片裁剪**: 
   - 拍摄时角度不正的图片
   - 包含多余背景的图片
   - 需要突出特定区域的图片

2. **标签系统**:
   - 标记重要程度：重要、一般、复习
   - 标记题型：选择题、填空题、解答题
   - 标记难度：简单、中等、困难

3. **批量重命名**:
   - 按日期整理：20251102_数学_001.jpg
   - 按学科整理：数学_第一章_001.jpg
   - 按重要性整理：重要_数学_001.jpg

4. **搜索功能**:
   - 快速找到特定题目的图片
   - 按标签筛选文件
   - 按学科分类查找

## 🆘 常见问题

### Q: 升级后原来的图片处理功能还能用吗？
A: 是的，所有原有功能都完全保留，并且修复了保存BUG。

### Q: 新增的标签会保存在哪里？
A: 标签保存在同目录下的 `.meta` 文件中，不影响原始图片。

### Q: 如何关闭自动备份功能？
A: 在设置中可以关闭自动备份，或者手动删除 `.backup` 文件。

### Q: 快捷键不工作怎么办？
A: 确保程序窗口获得焦点，某些系统可能需要管理员权限。

## 🎯 下个版本计划

v2.1.0 计划功能：
- 📱 移动端优化
- 🎨 更多主题选择
- 📊 图表统计分析
- 🔄 云同步功能
- 📝 题目分类自动识别

---

**感谢使用错题整理工具！**

如有问题或建议，欢迎反馈：
- 作者：mmm
- 赞助链接：https://gitee.com/orangearc655743/Wrong-Question-Tool.git